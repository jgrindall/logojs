start = n:nodelist
{
return {"text":n.text};
}

nodelist = n:node+
{
var s=[];
for(var i = 0;i<=n.length-1;i++){
s.push(n[i].text);
}
return {"text":s.join("$")};
}


node = t:text
{
return {"text":t.text};
}
/
w:wrappednode
{
return {"text":w.text};
}


text = t:[a-z0-9\[\]\(\);\t\r\n\& ]+
{
	var s = "";
	for(var i = 0;i<=t.length-1;i++){
		s += t[i].toString();
	}
	return {"text":s};
}


wrappednode =
emptynode
{
return {"text":""};
}
/
startnode n:nodelist endnode
{
	return {"text":n.text};
}


startnode = '<' [a-zA-Z0-9_ \"=\-\:;\(\),]+ '>'

endnode = '</' [a-z]+ '>'

emptynode = '<br>' / startnode endnode /  '<' [a-zA-Z0-9_ \"=\-\:;\(\),]+ '/>'
